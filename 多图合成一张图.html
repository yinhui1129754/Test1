<!DOCTYPE html><html><head lang="en">    <meta charset="UTF-8">    <title></title>    <script type="text/javascript" src="utils.js"></script></head><body><input id="selectImg" type="file" multiple="multiple" placeholder="选择文件"><div>    下面是合成的图片(如果没有自动下载请对着图片点击右键选择另存为):</div><script type="text/javascript">    class info{        constructor(cvs){            if(!$Utils.isNil(cvs))                this.cvs = document.createElement("canvas");            else                this.cvs = cvs;            this.ctx = this.cvs.getContext("2d");            this.imgArr = [];        }        loaded(){            let maxHIndex = 0,maxWIndex = 0; //最大宽度 最大高度索引            let h = this.imgArr[maxHIndex].height,w = this.imgArr[maxWIndex].width;//最大宽度 最大高度值            let allHeight = 0; //总高度            $Utils.each(this.imgArr,function(item,i){                if(item.height>h){                    h=item.height;                    maxHIndex = i;                }                if(item.width>w){                    w=item.width;                    maxWIndex = i;                }                allHeight +=item.height;            });            this.cvs.width = w;            this.cvs.height = allHeight;            this.ctx.clearRect(0,0,w,allHeight);            this.draw(w,allHeight);        }        draw(maxWidth,allHeight){            let y = 0,x = 0;            let THIS = this;            $Utils.each(this.imgArr,function(item,i){                x = (maxWidth-item.width)/2;                THIS.ctx.drawImage(THIS.imgArr[i],x,y,item.width,item.height);                y+=item.height;            });            this.downImg();        }        downImg(){            var a = document.createElement("a");            a.setAttribute("download","true");            a.setAttribute("href",this.cvs.toDataURL());            a.click();        }        loadImg(arr){            this.imgArr = [];            let THIS = this;            let nowLoadNum = 0;            if($Utils.isArray(arr)){                $Utils.each(arr,function(item,i){                    let img =new Image();                    img.src = item;                    if(img.complete){                        THIS.imgArr[i] = img;                        nowLoadNum++;                        if(nowLoadNum===arr.length){                            THIS.loaded();                        }                    }else{                        img.onload = function(){                            THIS.imgArr[i] = this;                            nowLoadNum++;                            if(nowLoadNum===arr.length){                                THIS.loaded();                            }                        };                        img.onerror = function(){                            console.log("错误:传入的加载图片地址有错误的地址");                        }                    }                });            }else{                return console.log("错误:传入的是参数不是一个数组");            }        }    }    let infoEx = new info();    document.body.appendChild(infoEx.cvs);    document.getElementById("selectImg").onchange = function(){        var imgArr = [        ];        let loadedNum = 0;        let len = this.files.length;        $Utils.each(this.files,function(item,i){            var redFile = new FileReader();            redFile.readAsDataURL(this);            redFile.onload = function(e){                imgArr[i] = e.currentTarget.result;                loadedNum++;                if( len== loadedNum){                    infoEx.loadImg(imgArr);                }            }        });    }</script></body></html>